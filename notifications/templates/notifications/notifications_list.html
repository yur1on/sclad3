{% extends 'warehouse/base.html' %}
{% block content %}
{% load static %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Roboto', sans-serif;
    }
    .notifications-container {
        max-width: 600px;
        margin: 20px auto;
        margin-left: 20px; /* Сдвигает блок влево */
        margin-right: auto;
        background: #f9f9f9;
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    .notifications-header {
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 15px;
        color: #007bff;
    }
    .notifications-list {
        list-style: none;
        padding: 0;
    }
    .notification-item {
        background: #fff;
        padding: 10px;
        border-radius: 10px;
        margin-bottom: 10px;
        border: 1px solid #ddd;
    }
    .notification-item strong {
        color: #007bff;
    }
    .notification-item small {
        display: block;
        color: #555;
        font-size: 12px;
    }
    .notification-form {
        margin-bottom: 15px;
    }
    .notification-form label {
        font-size: 16px;
        font-weight: 500;
    }
</style>

<div class="notifications-container">
    <div class="notifications-header">Уведомления</div>

    <form action="{% url 'toggle_notifications' %}" method="POST" class="notification-form">
        {% csrf_token %}
        <label>
            <input type="checkbox" name="receive_notifications" onchange="this.form.submit()"
                   {% if request.user.profile.receive_notifications %}checked{% endif %}>
            Получать уведомления
        </label>
    </form>

    <ul class="notifications-list">
        {% for notification in notifications %}
            <li class="notification-item">
                <a href="{% url 'notification_detail' notification.id %}">
                    {% if not notification.is_read %}
                        <strong>{{ notification.text|truncatechars:50 }}</strong> (Новое)
                    {% else %}
                        {{ notification.text|truncatechars:50 }}
                    {% endif %}
                </a>
                <br>
                <small>Отправитель: {{ notification.sender.profile.full_name|default:notification.sender.username }}</small>
                <br>
                <small>Дата: {{ notification.timestamp }}</small>
            </li>
        {% empty %}
            <p>Уведомлений нет</p>
        {% endfor %}
    </ul>
</div>

{% endblock %}
