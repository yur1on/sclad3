{% extends 'warehouse/base.html' %}
{% load static %}
{% block title %}Поиск{% endblock %}

{% block content %}
<div class="container">
    <h2 class="my-4 text-center text-dark">Поиск по складам</h2>

    <!-- Простой поиск -->
    <form method="GET" action="{% url 'search' %}" class="mb-4">
        <div class="col-md-4 mb-3">
            <label for="region">Область и город</label>
            <div class="input-group">
                <select id="id_region" name="region" class="form-control">
                    <option value="">Вся Беларусь</option>
                    <option value="Минская область">Минская область</option>
                    <option value="Гомельская область">Гомельская область</option>
                    <option value="Гродненская область">Гродненская область</option>
                    <option value="Витебская область">Витебская область</option>
                    <option value="Брестская область">Брестская область</option>
                    <option value="Могилёвская область">Могилёвская область</option>
                </select>
                <select id="id_city" name="city" class="form-control">
                    <option value="">Все города</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 mb-3">
                <label for="search">Поиск по ключевым словам</label>
                <input type="text" name="q" id="search" class="form-control border-dark" placeholder="Введите запрос" value="{{ request.GET.q }}">
            </div>
            <div class="col-md-2 d-flex align-items-end mb-3">
                <button type="submit" class="btn btn-dark btn-block text-white">Искать</button>
            </div>
        </div>
    </form>

<!-- Расширенный поиск -->
<div id="advanced-search-toggle" class="text-end mb-4">
    <button class="btn btn-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#advanced-search">Расширенный поиск</button>
</div>
<div id="advanced-search" class="collapse">
    <form method="GET" action="{% url 'search' %}" class="mb-4" id="advanced-search-form">
        <div class="row">
            <div class="col-md-2 mb-3">
                <label for="device">Устройство</label>
                <input type="text" name="device" id="device" class="form-control border-dark" placeholder="Устройство" value="{{ request.GET.device }}" list="device-list">
                <datalist id="device-list">
                    <option value="Телефон">
                    <option value="Планшет">
                    <option value="Ноутбук">
                    <option value="Смарт-часы">
                </datalist>
            </div>
            <div class="col-md-2 mb-3">
                <label for="brand">Бренд</label>
                <input type="text" name="brand" id="brand" class="form-control border-dark" placeholder="Бренд" value="{{ request.GET.brand }}" list="brand-list">
                <datalist id="brand-list"></datalist>
            </div>
            <div class="col-md-2 mb-3">
                <label for="model">Модель</label>
                <input type="text" name="model" id="model" class="form-control border-dark" placeholder="Модель" value="{{ request.GET.model }}" list="model-list">
                <datalist id="model-list"></datalist>
            </div>
            <div class="col-md-2 mb-3">
                <label for="part_type">Тип запчасти</label>
                <input type="text" name="part_type" id="part_type" class="form-control border-dark" placeholder="Тип запчасти" value="{{ request.GET.part_type }}" list="part-type-list">
                <datalist id="part-type-list"></datalist>
            </div>
            <div class="col-md-2 d-flex align-items-end mb-3">
                <button type="submit" class="btn btn-dark btn-block text-white">Расширенный поиск</button>
            </div>
        </div>
    </form>
</div>

<hr>
<!-- Динамические кнопки устройств, брендов, моделей -->
<div id="device-buttons" class="mb-3"></div>
<div id="brand-buttons" class="mb-3"></div>
<div id="model-buttons" class="mb-3"></div>

    <!-- Результаты -->
    <div id="part-results" class="mb-4"></div>

    <!-- Таблица результатов поиска -->
    {% include 'warehouse/search_table.html' %}
</div>

<link rel="stylesheet" href="{% static 'css/search.css' %}">
<script src="{% static 'js/search.js' %}"></script>
{% endblock %}
