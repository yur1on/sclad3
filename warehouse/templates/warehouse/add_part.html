{% extends 'warehouse/base.html' %}
{% block title %}Добавить запчасть{% endblock %}
{% block content %}
{% load static %}
    <h2 class="page-title">Добавить запчасть</h2>
    <form method="post" id="part-form" class="form-container" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Поля для выбора устройства, бренда, модели и других данных -->
        <div class="form-group">
            <label for="device">Устройство:</label>
            <input list="devices" id="id_device" name="device" class="form-control" placeholder="Введите устройство" onchange="handleDeviceChange();">
            <datalist id="devices">
                <option value="Телефон">
                <option value="Планшет">
                <option value="Ноутбук">
                <option value="Компьютер">
                <option value="Смарт-часы">
            </datalist>
        </div>

        <div class="form-group">
            <label for="brand">Бренд:</label>
            <input list="brands" id="id_brand" name="brand" class="form-control" placeholder="Введите бренд" onchange="updateModelOptions();">
            <datalist id="brands">
                <!-- Бренды будут добавляться динамически -->
            </datalist>
        </div>

        <div class="form-group">
            <label for="model">Модель:</label>
            <input list="models" id="id_model" name="model" class="form-control" placeholder="Введите модель">
            <datalist id="models">
                <!-- Модели будут добавляться динамически -->
            </datalist>
        </div>

        <div class="form-group">
            <label for="part_type">Тип запчасти:</label>
            <input list="part_types" id="id_part_type" name="part_type" class="form-control" placeholder="Введите тип запчасти" onchange="handlePartTypeChange();">
            <datalist id="part_types">
                <!-- Типы запчастей будут добавляться динамически -->
            </datalist>
        </div>

        <!-- Поле для выбора цвета (показывается только при необходимости) -->
        <div class="form-group" id="color-group" style="display: none;">
            <label for="color">Цвет:</label>
            <input list="colors" id="id_color" name="color" class="form-control" placeholder="Выберите цвет">
            <datalist id="colors">
                <!-- Цвета будут добавляться динамически -->
            </datalist>
        </div>

        <div class="form-group">
            <label for="quantity">Количество:</label>
            {{ form.quantity }}
        </div>

        <div class="form-group">
            <label for="price">Цена:</label>
            <div class="input-group">
                <input type="number" name="price" id="id_price" class="form-control" placeholder="Введите цену" step="1" min="0">
                <span class="input-group-text">бел.руб.</span> <!-- Добавляем обозначение валюты -->
            </div>
        </div>


        <!-- Поддержка formset для загрузки до 5 изображений -->
        <div class="form-group">
            <label for="image">Фото (до 5 изображений):</label>
            {{ formset.management_form }}
            {% for form in formset %}
                <div class="form-group">
                    {{ form.image.label_tag }} {{ form.image }}
                </div>
            {% endfor %}
        </div>

        <button type="submit" class="btn-submit">Добавить</button>
    </form>

    <script src="{% static 'js/add_part.js' %}"></script>
{% endblock %}
