<div class="table-responsive">
    <table class="table table-striped table-bordered table-hover">
        <thead class="table-dark">
            <tr>
                <th>Устройство</th>
                <th>Бренд</th>
                <th>Модель</th>
                <th>Тип запчасти</th>
                <th>Цвет</th>
                <th>Кол-во</th>
                <th>Цена</th>
                <th>Изображение</th>
                <th>Город</th>
            </tr>
        </thead>
        <tbody>
            {% for result in results %}
            <tr onclick="window.location.href='{% url 'part_detail' result.id %}'" style="cursor:pointer;">
                <td>{{ result.device }}</td>
                <td>{{ result.brand }}</td>
                <td>{{ result.model }}</td>
                <td>{{ result.part_type }}</td>
                <td>{{ result.color|default:"Не указан" }}</td>
                <td>{{ result.quantity }}</td>
                <td>{{ result.price|floatformat:0 }} руб.</td>
                <td>
                    {% if result.images.all %}
                        <a href="{{ result.images.first.image.url }}" target="_blank">
                            <img src="{{ result.images.first.image.url }}" alt="Изображение запчасти" class="img-thumbnail" style="max-width: 80px; max-height: 80px;">
                        </a>
                        {% if result.images.count > 1 %}
                            <br>
                            <small>+{{ result.images.count|add:"-1" }} еще</small> <!-- Показываем сколько еще изображений есть -->
                        {% endif %}
                    {% else %}
                        Нет изображения
                    {% endif %}
                </td>
                <td>{{ result.user.profile.city }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
