{% extends 'warehouse/base.html' %}
{% block title %}Добавить запчасть{% endblock %}
{% block content %}
    <h2>Добавить запчасть</h2>
    <form method="post" id="part-form" class="form-container" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-group">
            <label for="device">Устройство:</label>
            <input list="devices" id="id_device" name="device" class="form-control" placeholder="Введите устройство" onchange="updateBrandOptions(); updatePartTypeOptions();">
            <datalist id="devices">
                <option value="Телефон">
                <option value="Планшет">
                <option value="Ноутбук">
                <option value="Компьютер">
                <option value="Смарт-часы">
            </datalist>
        </div>

        <div class="form-group">
            <label for="brand">Бренд:</label>
            <input list="brands" id="id_brand" name="brand" class="form-control" placeholder="Введите бренд" onchange="updateModelOptions()">
            <datalist id="brands">
                <!-- Бренды будут добавляться динамически -->
            </datalist>
        </div>

        <div class="form-group">
            <label for="model">Модель:</label>
            <input list="models" id="id_model" name="model" class="form-control" placeholder="Введите модель">
            <datalist id="models">
                <!-- Модели будут добавляться динамически -->
            </datalist>
        </div>

        <div class="form-group">
            <label for="part_type">Тип запчасти:</label>
            <input list="part_types" id="id_part_type" name="part_type" class="form-control" placeholder="Введите тип запчасти">
            <datalist id="part_types">
                <!-- Типы запчастей будут добавляться динамически -->
            </datalist>
        </div>

        <div class="form-group">
            <label for="quantity">Количество:</label>
            {{ form.quantity }}
        </div>

        <div class="form-group">
            <label for="price">Цена:</label>
            {{ form.price }}
        </div>

        <div class="form-group">
            <label for="image">Фото:</label>
            {{ form.image }}
        </div>

        <button type="submit" class="btn-submit">Добавить</button>
    </form>

    <script>
        function updateBrandOptions() {
            var device = document.getElementById('id_device').value;
            var brandSelect = document.getElementById('brands');
            brandSelect.innerHTML = '';  // Очистить предыдущие бренды

            var brands = {
                'Телефон': ['Samsung', 'Huawei', 'Xiaomi', 'Apple', 'LG'],
                'Ноутбук': ['Asus', 'Acer'],
                // Добавьте другие устройства и бренды по мере необходимости
            };

            if (brands[device]) {
                brands[device].forEach(function(brand) {
                    var option = document.createElement('option');
                    option.value = brand;
                    option.text = brand;
                    brandSelect.appendChild(option);
                });
            }

            // Очистить список моделей при изменении устройства
            document.getElementById('models').innerHTML = '';
        }

        function updateModelOptions() {
            var brand = document.getElementById('id_brand').value;
            var modelSelect = document.getElementById('models');
            modelSelect.innerHTML = '';  // Очистить предыдущие модели

            var models = {
                'Samsung': ['Galaxy S21', 'Galaxy S20', 'Galaxy A10', 'Galaxy A20', 'Galaxy A30'],
                'Huawei': ['P40', 'P40 Lite', 'P50'],
                'Xiaomi': ['Redmi Note 10', 'Redmi Note 9', 'Mi 11'],
                'Apple': ['iPhone 13', 'iPhone 12', 'iPhone 11'],
                'LG': ['LG G7', 'LG V40', 'LG K50'],
                'Asus': ['ZenBook 14', 'ROG Strix G15', 'VivoBook S15'],
                'Acer': ['Aspire 7', 'Nitro 5', 'Swift 3']
                // Добавьте другие бренды и модели по мере необходимости
            };

            if (models[brand]) {
                models[brand].forEach(function(model) {
                    var option = document.createElement('option');
                    option.value = model;
                    option.text = model;
                    modelSelect.appendChild(option);
                });
            }
        }

        function updatePartTypeOptions() {
            var device = document.getElementById('id_device').value;
            var partTypeSelect = document.getElementById('part_types');
            partTypeSelect.innerHTML = '';  // Очистить предыдущие типы запчастей

            var partTypes = {
                'Телефон': ['Динамик', 'Дисплей', 'Шлейф межплатный', 'Основная плата', 'Стекло для переклейки', 'Задняя крышка'],
                'Планшет': ['Динамик', 'Дисплей', 'Шлейф межплатный', 'Основная плата', 'Стекло для переклейки', 'Задняя крышка'],
                'Ноутбук': ['Динамик', 'Дисплей', 'Клавиатура', 'Батарея', 'Жесткий диск', 'Оперативная память'],
                'Компьютер': ['Процессор', 'Материнская плата', 'Блок питания', 'Оперативная память', 'Жесткий диск', 'Корпус'],
                'Смарт-часы': ['Динамик', 'Дисплей', 'Батарея', 'Шлейф межплатный', 'Корпус', 'Сенсор']
            };

            if (partTypes[device]) {
                partTypes[device].forEach(function(partType) {
                    var option = document.createElement('option');
                    option.value = partType;
                    option.text = partType;
                    partTypeSelect.appendChild(option);
                });
            }
        }
    </script>
{% endblock %}
